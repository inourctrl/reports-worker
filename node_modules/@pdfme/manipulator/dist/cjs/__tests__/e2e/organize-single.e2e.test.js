"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../../src/index");
const test_helpers_1 = require("../test-helpers");
require("jest-image-snapshot");
describe('E2E: organize (single operations)', () => {
    const fiveP = (0, test_helpers_1.loadTestPDF)('5p.pdf');
    const aPdf = (0, test_helpers_1.loadTestPDF)('a.pdf');
    const bPdf = (0, test_helpers_1.loadTestPDF)('b.pdf');
    test('organize: single remove (remove the 2nd page)', async () => {
        const result = await (0, index_1.organize)(fiveP, [{ type: 'remove', data: { position: 1 } }]);
        const images = await (0, test_helpers_1.pdfToImages)(result);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `organize-remove-only-result-page${i + 1}`,
            });
        }
    });
    test('organize: single insert (insert a.pdf at page 1)', async () => {
        const result = await (0, index_1.organize)(fiveP, [{ type: 'insert', data: { pdf: aPdf, position: 0 } }]);
        const images = await (0, test_helpers_1.pdfToImages)(result);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `organize-insert-only-result-page${i + 1}`,
            });
        }
    });
    test('organize: single replace (replace 2nd page with a.pdf)', async () => {
        const result = await (0, index_1.organize)(fiveP, [{ type: 'replace', data: { pdf: aPdf, position: 1 } }]);
        const images = await (0, test_helpers_1.pdfToImages)(result);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `organize-replace-only-result-page${i + 1}`,
            });
        }
    });
    test('organize: single rotate (rotate pages 1 and 3 by 90 degrees)', async () => {
        const result = await (0, index_1.organize)(fiveP, [
            { type: 'rotate', data: { position: 0, degrees: 90 } },
            { type: 'rotate', data: { position: 2, degrees: 90 } },
        ]);
        const images = await (0, test_helpers_1.pdfToImages)(result);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `organize-rotate-only-result-page${i + 1}`,
            });
        }
    });
    test('organize: multiple operations (remove -> remove -> insert -> replace -> rotate -> rotate)', async () => {
        const insertPdf = aPdf;
        const replacePdf = bPdf;
        const result = await (0, index_1.organize)(fiveP, [
            { type: 'remove', data: { position: 1 } },
            { type: 'remove', data: { position: 3 } }, // 5 -> 3 pages
            { type: 'insert', data: { pdf: insertPdf, position: 1 } }, // 3 -> 4 pages
            { type: 'replace', data: { position: 2, pdf: replacePdf } }, // still 4 pages
            { type: 'rotate', data: { position: 0, degrees: 90 } },
            { type: 'rotate', data: { position: 3, degrees: 90 } },
        ]);
        const images = await (0, test_helpers_1.pdfToImages)(result);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `organize-multiple-ops-result-page${i + 1}`,
            });
        }
    });
});
//# sourceMappingURL=organize-single.e2e.test.js.map