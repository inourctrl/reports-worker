"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../../src/index");
const test_helpers_1 = require("../test-helpers");
require("jest-image-snapshot");
describe('E2E: insert', () => {
    const fiveP = (0, test_helpers_1.loadTestPDF)('5p.pdf');
    const aPdf = (0, test_helpers_1.loadTestPDF)('a.pdf');
    test('insert: insert a.pdf at position 0 in 5p.pdf', async () => {
        const inserted = await (0, index_1.insert)(fiveP, [{ pdf: aPdf, position: 0 }]);
        const images = await (0, test_helpers_1.pdfToImages)(inserted);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `insert-5p-a-at-0-result-page${i + 1}`,
            });
        }
    });
    test('insert: insert a.pdf at position 0 and 2 in 5p.pdf', async () => {
        // Note: the second insert is done in the same buffer, so the offset changes after the first insert
        const inserted = await (0, index_1.insert)(fiveP, [
            { pdf: aPdf, position: 0 },
            { pdf: aPdf, position: 2 }, // The PDF is 6 pages after the first insert
        ]);
        const images = await (0, test_helpers_1.pdfToImages)(inserted);
        for (let i = 0; i < images.length; i++) {
            expect(images[i]).toMatchImageSnapshot({
                customSnapshotIdentifier: `insert-5p-a-at-0-and-2-result-page${i + 1}`,
            });
        }
    });
});
//# sourceMappingURL=insert.e2e.test.js.map